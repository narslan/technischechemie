% !TEX encoding   = UTF-8
% !TEX program    = LuaLaTeX
% !TEX spellcheck = de_DE
\documentclass[a4paper]{article}
\usepackage{fontspec}
\usepackage[usenames,dvipsnames]{color}
\usepackage{siunitx}

\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{units}
\usetikzlibrary{datavisualization} 

\usetikzlibrary{arrows,chains,matrix,shapes}
\usepackage{luacode}
\definecolor{skyblue1}{rgb}{0.447,0.624,0.812}
\definecolor{scarletred1}{rgb}{0.937,0.161,0.161}
\definecolor{chameleon1}{rgb}{0.541,0.886,0.204}
%\usepackage{helvet}

%\usepackage[landscape]{geometry}
%\setmainfont{Ubuntu}
\defaultfontfeatures{Ligatures=TeX,Numbers=OldStyle,Scale=MatchLowercase}
\setmainfont{Linux Libertine}
\setsansfont{Linux Biolinum}
\usepackage{fancyhdr}
\pagestyle{fancy}
\usepackage{subcaption}
\usepackage{geometry}
 \geometry{
 a4paper,
 left=2mm,
 top=30mm,
 right=2mm
 }



\rhead{ Gruppe 6}
\lhead{\textbf{Fluoreszenzspektroskopie} Stokes Verschiebung (\textit{St. Ver.}) und Wellenl채ngenmaxima - Anhang 4}
\fancyheadoffset{-1cm}
\pagenumbering{gobble}
\usetikzlibrary{pgfplots.groupplots}

\begin{luacode*}


  fs = dofile("fs.lua")

  function drawPU()

  ph12ax,ph12ay = fs.readcsv("data/ph12anregung420_410.txt",23)
  ph12ex,ph12ey = fs.readcsv("data/ph12emmissions_360_370.txt",23)

  tex.sprint("\\addplot[".."no marks,blue".."] coordinates{")
    for i=1,#ph12ax do
    	tex.sprint("("..ph12ax[i]..","..ph12ay[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Anregung}")

  
	tex.sprint("\\addplot[".."no marks,red".."] coordinates{")

    for i=1,#ph12ex do
    tex.sprint("("..ph12ex[i]..","..ph12ey[i]..")")
    end
  tex.sprint("};")
	tex.sprint("node [pos=1,anchor=east, text=black] {Fluoreszenzintensit채t};")
	tex.sprint("\\draw[->] (0,-2) -- (0,4) node[above] {$y(t)$};")
	tex.sprint("\\addlegendentry{Emission}")

  end



  function drawZU()

  ph12ax,ph12ay = fs.readcsv("data/ph12anregung_350_340.txt",23)
  ph12ex,ph12ey = fs.readcsv("data/ph12emmissions_320_330.txt",23)



  tex.sprint("\\addplot[".."no marks,blue".."] coordinates{")

    for i=1,#ph12ax do
    tex.sprint("("..ph12ax[i]..","..ph12ay[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Anregung}")

  tex.sprint("\\addplot[".."no marks,red".."] coordinates{")

    for i=1,#ph12ex do
    tex.sprint("("..ph12ex[i]..","..ph12ey[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Emission}")

  end

  function drawHU()

  ph12ax,ph12ay = fs.readcsv("data/ph06anregung420_410.txt",23)
  ph12ex,ph12ey = fs.readcsv("data/ph06emmissions_360_370.txt",23)

  tex.sprint("\\addplot[".."no marks,blue".."] coordinates{")

    for i=1,#ph12ax do
    tex.sprint("("..ph12ax[i]..","..ph12ay[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Anregung}")

  tex.sprint("\\addplot[".."no marks,red".."] coordinates{")

    for i=1,#ph12ex do
    tex.sprint("("..ph12ex[i]..","..ph12ey[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Emission}")

  end

  function drawOU()

  ph12ax,ph12ay = fs.readcsv("data/ph06anregung350_340.txt",23)
  ph12ex,ph12ey = fs.readcsv("data/ph06emmissions_320_330.txt",23)



  tex.sprint("\\addplot[".."no marks,blue".."] coordinates{")

    for i=1,#ph12ax do
    tex.sprint("("..ph12ax[i]..","..ph12ay[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Anregung}")

  tex.sprint("\\addplot[".."no marks,red".."] coordinates{")

    for i=1,#ph12ex do
    tex.sprint("("..ph12ex[i]..","..ph12ey[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Emission}")

  end

  function drawBU()

  ph12ax,ph12ay = fs.readcsv("data/ph02anregung420_410.txt",23)
  ph12ex,ph12ey = fs.readcsv("data/ph02emmissions_360_370.txt",23)

  tex.sprint("\\addplot[".."no marks,blue".."] coordinates{")

    for i=1,#ph12ax do
    tex.sprint("("..ph12ax[i]..","..ph12ay[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Anregung}")

  tex.sprint("\\addplot[".."no marks,red".."] coordinates{")

    for i=1,#ph12ex do
    tex.sprint("("..ph12ex[i]..","..ph12ey[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Emission}")

  end

  function drawIU()

  ph12ax,ph12ay = fs.readcsv("data/ph02anregung350_340.txt",23)
  ph12ex,ph12ey = fs.readcsv("data/ph02emmissions_320_330.txt",23)



  tex.sprint("\\addplot[".."no marks,blue".."] coordinates{")

    for i=1,#ph12ax do
    tex.sprint("("..ph12ax[i]..","..ph12ay[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Anregung}")

  tex.sprint("\\addplot[".."no marks,red".."] coordinates{")

    for i=1,#ph12ex do
    tex.sprint("("..ph12ex[i]..","..ph12ey[i]..")")
    end
  tex.sprint("};")
  tex.sprint("\\addlegendentry{Emission}")

  end

\end{luacode*}


\newcommand\addplotzz{\directlua{drawPU()}}
\newcommand\addplotyu{\directlua{drawZU()}}
\newcommand\addplothu{\directlua{drawHU()}}
\newcommand\addplotou{\directlua{drawOU()}}
\newcommand\addplotbu{\directlua{drawBU()}}
\newcommand\addplotiu{\directlua{drawIU()}}
\definecolor{skyblue1}{RGB}{135, 206, 250}
\definecolor{flame}{RGB}{226, 88, 34}
\definecolor{scarletred1}{RGB}{252, 40, 71}
\definecolor{cyanblau}{RGB}{0, 158, 224}
\definecolor{darkblue}{RGB}{0, 0,139}
\definecolor{charcoal}{rgb}{0.21, 0.27, 0.31}
\definecolor{turquoise}{rgb}{0 0.41 0.41}
\definecolor{rouge}{rgb}{0.79 0.0 0.1}
\definecolor{vert}{rgb}{0.15 0.4 0.1}
\definecolor{mauve}{rgb}{0.6 0.4 0.8}
\definecolor{violet}{rgb}{0.58 0. 0.41}
\definecolor{orange}{rgb}{0.8 0.4 0.2}
\definecolor{bleu}{rgb}{0.39, 0.58, 0.93}

\definecolor{azulen}{RGB}{0,218,255}



\begin{document}
\pgfplotsset{
  standard/.style={
    axis x line=bottom,
    axis y line=left,
    xlabel= Wellenl채nge, % Set the labels
    ylabel= Intensit채t ,
    x unit= \si{\nano\meter},
    legend style={at={(0.8,1)},anchor=north},
    y label style={at={(axis description cs:-.2,.5)},anchor=south},
    x tick label style={rotate=90,anchor=east},
    yticklabel style={/pgf/number format/fixed},
    scaled y ticks=false,
legend cell align=left
  }
}

\begin{table}[!ht]
  \centering
 \begin{tabular}{ll}
 Anregungsspektren bei $\lambda_{em}$ = 420 \si{\nano\meter} & Anregungsspektren bei $\lambda_{em}$ = 350 \si{\nano\meter}   \\
 Emissionsspektren bei $\lambda_{ex}$ = 360 \si{\nano\meter} & Emissionsspektren bei $\lambda_{ex}$ = 320 \si{\nano\meter}  \\
\hline
\begin{tikzpicture}
\begin{axis}[standard,title= \textbf{2-Naphtolat ph 12}]
  \addplotzz
\draw[|->|] (343,2.502e5) -- (411,2.502e5) node[midway,above] (d) {St. Ver.};
\end{axis}
	%\draw[->,black,thick] (6.8,0)  -- (6.8,5.8) node[midway,above,rotate=90] (d) {Emmision};
\end{tikzpicture}
 &
 \begin{tikzpicture}
\begin{axis}[standard,title= \textbf{2-Naphtolat / ph 12}]
  \addplotyu
\end{axis}
\end{tikzpicture}
 \\
\begin{tikzpicture}
\begin{axis}[standard,title= \textbf{2-Naphtol / ph 2}]
  \addplotbu
\end{axis}
\end{tikzpicture}
& 
\begin{tikzpicture}
\begin{axis}[standard,title= \textbf{2-Naphtol / ph 2}]
  \addplotiu
\end{axis}
\end{tikzpicture}
\\
\begin{tikzpicture}
\begin{axis}[standard,title= \textbf{2-Naphtol $\rightleftharpoons$ 2-Naphtolat /  ph 6 }]
  \addplothu
\end{axis}
\end{tikzpicture}
& 
\begin{tikzpicture}
\begin{axis}[standard,title= \textbf{2-Naphtol $\rightleftharpoons$ 2-Naphtolat   / ph 6 }]
  \addplotou
\end{axis}
\end{tikzpicture}

\end{tabular}
\end{table}






    \end{document}
