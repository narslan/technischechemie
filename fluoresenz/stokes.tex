% !TEX encoding   = UTF-8
% !TEX program    = LuaLaTeX
% !TEX spellcheck = de_DE
\documentclass[a4paper]{article}
\usepackage{fontspec}
\usepackage[usenames,dvipsnames]{color}
\usepackage{siunitx}
\usepackage[german]{babel}

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=newest}
\usepgfplotslibrary{units}


\usepackage{luacode}
\definecolor{skyblue1}{rgb}{0.447,0.624,0.812}
\definecolor{scarletred1}{rgb}{0.937,0.161,0.161}
\definecolor{chameleon1}{rgb}{0.541,0.886,0.204}
%\usepackage{helvet}
\usepackage{unicode-math}

%\usepackage[landscape]{geometry}
%\setmainfont{Ubuntu}
\defaultfontfeatures{Ligatures=TeX,Numbers=OldStyle,Scale=MatchLowercase}
\setmainfont{Linux Libertine}
\setsansfont{Linux Biolinum}
\usepackage{fancyhdr}
\pagestyle{fancy}
\usepackage{subcaption}


\rhead{ Gruppe 6}
\lhead{\textbf{Fluoreszenzspektroskopie} Stokes Verschiebung}
\setlength{\headheight}{15pt}
\pagenumbering{gobble}
\usetikzlibrary{pgfplots.groupplots}

\usepackage{caption}
\captionsetup[figure]{labelformat=empty}% redefines the caption setup of the figures environment in the beamer class.

\usepackage{caption}
\captionsetup[figure]{labelformat=empty}% redefines the caption setup of the figures environment in the beamer class.

%\usepackage{libertine}
%\usepackage{beramono}
%\setmainfont{Ubuntu}
\begin{luacode*}

fs = dofile("fs.lua")

function drawPU()

 xwerte, ywerte = fs.readcsv("data/ph12anregung420_410.txt",23)
xa, xb= fs.readcsv("data/ph02anregung350_340.txt",23)


    tex.sprint("\\addplot[".."no marks,blue".."] coordinates{")

    for i=1,#xwerte do
      tex.sprint("("..xwerte[i]..","..ywerte[i]..")")
    end
    tex.sprint("};")
     tex.sprint("\\addlegendentry{2-Naphtholat}")

 tex.sprint("\\addplot[".."no marks,red".."] coordinates{")

    for i=1,#xa do
      tex.sprint("("..xa[i]..","..xb[i]..")")
    end
    tex.sprint("};")
     tex.sprint("\\addlegendentry{2-Naphthol}")



end


\end{luacode*}


 \newcommand\addplotzz{\directlua{drawPU()}}


\begin{document}
\pgfplotsset{
  standard/.style={
    axis x line=bottom,
    axis y line=middle,
     xlabel= Wellenlänge, % Set the labels
    ylabel= Intensität ,
    x unit= \si{\nano\meter},
       legend style={at={(1.2,1)},anchor=north},
    y label style={at={(axis description cs:-.19,.5)},rotate=90,anchor=south},
    x tick label style={rotate=90,anchor=east},
   yticklabel style={/pgf/number format/sci},
scaled y ticks=false
  }
}
  \tikzset{
    every pin/.style={fill=scarletred1,rectangle,rounded corners=3pt,font=\tiny},
    small dot/.style={fill=chameleon1,circle,scale=0.3}
  }

\begin{figure}
\begin{tikzpicture}

\begin{axis}[standard]
    \addplotzz
  \end{axis}
\end{tikzpicture}
\caption{ Stokes Verschiebung}

\end{figure}
\end{document}
